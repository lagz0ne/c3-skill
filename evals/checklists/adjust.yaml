name: adjust
description: Structural requirements for ADJUST (ADR creation)

checks:
  # === ADR file creation ===
  - id: adr-created
    description: ADR file created with correct naming (adr-YYYYMMDD-slug.md)
    type: glob_exists
    pattern: "adr/adr-[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]-*.md"

  # === ADR frontmatter ===
  - id: adr-frontmatter
    description: ADR has required frontmatter fields
    type: frontmatter_glob
    pattern: "adr/adr-*.md"
    required_fields:
      - id
      - title
      - summary
      - status
      - date
      - affects
    expect:
      status: proposed

  # === ADR required sections ===
  - id: adr-problem-section
    description: ADR has Problem/Requirement section
    type: sections_glob
    pattern: "adr/adr-*.md"
    required:
      - "## Problem/Requirement"

  - id: adr-exploration-section
    description: ADR has Exploration Journey section
    type: sections_glob
    pattern: "adr/adr-*.md"
    required:
      - "## Exploration Journey"

  - id: adr-solution-section
    description: ADR has Solution section
    type: sections_glob
    pattern: "adr/adr-*.md"
    required:
      - "## Solution"

  - id: adr-changes-section
    description: ADR has Changes Across Layers section
    type: sections_glob
    pattern: "adr/adr-*.md"
    required:
      - "## Changes Across Layers"

  - id: adr-verification-section
    description: ADR has Verification section
    type: sections_glob
    pattern: "adr/adr-*.md"
    required:
      - "## Verification"

  - id: adr-implementation-section
    description: ADR has Implementation Plan section
    type: sections_glob
    pattern: "adr/adr-*.md"
    required:
      - "## Implementation Plan"

  - id: adr-audit-record
    description: ADR has Audit Record section
    type: sections_glob
    pattern: "adr/adr-*.md"
    required:
      - "## Audit Record"

  # === ADR content quality ===
  - id: adr-lifecycle-table
    description: Audit Record has lifecycle tracking table
    type: regex_glob
    pattern: "adr/adr-*.md"
    regex: '^\|.*Proposed.*\|'

  - id: adr-affects-references
    description: Changes Across Layers references specific c3 IDs
    type: regex_glob
    pattern: "adr/adr-*.md"
    regex: 'c3-[0-9]+'
