#!/usr/bin/env bash
#
# C3 SessionStart Hook
#
# Checks if .c3/README.md exists in the project.
# If exists: outputs harness message to activate C3 skill usage
# If not: exits silently
#
# For SessionStart hooks, stdout is added to context when exit code is 0.

set -uo pipefail

# Get project directory
PROJECT_DIR="${CLAUDE_PROJECT_DIR:-$(pwd)}"

# Check if .c3/README.md exists
if [[ -f "$PROJECT_DIR/.c3/README.md" ]]; then
    cat << 'EOF'
<c3-architecture-harness>
This project has C3 architecture documentation (.c3/).

## C3 Agent Routing

https://diashort.apps.quickable.co/d/dd86da1c

| Request Type | Use | Why |
|--------------|-----|-----|
| "where is X", "how does Y" | `c3-skill:c3-navigator` | Visual answers with diagrams |
| "add", "change", "refactor" | `c3-skill:c3-orchestrator` | Impact analysis â†’ ADR |
| "audit", "validate" | `/c3` skill | Doc consistency checks |

Use the appropriate agent BEFORE responding.
</c3-architecture-harness>
EOF
fi

exit 0
